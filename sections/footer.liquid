<div class="container pb-1">

  <div class="footer__top">
    <div class="row">
      {% for block in section.blocks %}
        <style>
          @media (min-width: 992px) {
            [data-block-id="{{ block.id }}"] {
              max-width: {{ block.settings.content_max_width }}px;
            }
          }
        </style>
        <div class="col-lg-6{% if block.settings.hide_on_mobile %} d-none d-lg-block{% endif %}" {{ block.attributes }}>
          <div class="border pt-1 pb-1 pl-1 pr-1 h-100">
            <h3 class="mb-0.5 text-primary text-0.875 lh-150">{{ block.settings.heading }}</h3>
            <div class="rte transparent-0.4" data-block-id="{{ block.id }}">
              {{ block.settings.content }}
            </div>

            {%- case block.type -%}
              {%- when 'text' -%}
                {% if block.settings.url != blank %}
                  <div class="mt-2 d-flex justify-content-end">
                    <a href="{{ block.settings.url }}" class="btn--circle border-2 btn--outline btn--outline--dark">
                      {% render 'icon' with 'arrow-right' %}
                    </a>
                  </div>
                {% endif %}
              {%- when 'newsletter' -%}
                <div class="mt-2">
                  {% form 'customer' %}
                    {%- if form.posted_successfully? -%}
                      <h3 class="text-0.875 mb-0" id="Newsletter-success--{{ section.id }}" tabindex="-1" autofocus>{{ 'newsletter.success' | t }}</h3>
                    {% else %}
                      <input type="hidden" name="contact[tags]" value="newsletter">
                      <div class="newsletter-form__field-wrapper">
                        <div class="position-relative">
                          <label class="visually-hidden" for="NewsletterForm--{{ section.id }}">
                            {{ 'newsletter.label' | t }}
                          </label>
                          <input
                            id="NewsletterForm--{{ section.id }}"
                            type="email"
                            name="contact[email]"
                            class="form__input border w-100 text-1.125"
                            value="{{ form.email }}"
                            aria-required="true"
                            autocorrect="off"
                            autocapitalize="off"
                            autocomplete="email"
                            {% if form.errors %}
                              autofocus
                              aria-invalid="true"
                              aria-describedby="Newsletter-error--{{ section.id }}"
                              {% elsif form.posted_successfully? %}
                              aria-describedby="Newsletter-success--{{ section.id }}"
                            {% endif %}
                            placeholder="{{ block.settings.placeholder }}"
                            required
                          >
                          <button type="submit" class="form__submit btn--circle btn--outline btn--outline--dark border-2 position-absolute" name="commit" id="Subscribe" aria-label="{{ 'newsletter.button_label' | t }}">
                            {% render 'icon' with 'arrow-right' %}
                          </button>
                        </div>
                        {%- if form.errors -%}
                          <p class="text-0.875 mb-0" id="Newsletter-error--{{ section.id }}">{% render 'icon-error' %}{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</p>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                  {% endform %}
                </div>
            {%- endcase -%}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="footer__bottom mt-1 mt-md-2 pt-1 pb-1 pl-1 pr-1 border">
    <div class="row">
      <div class="col-lg-6">
        <div class="rte text-dark">
          {{ section.settings.content }}
        </div>

        {% if section.settings.show_social %}
          <div class="mt-2 mt-md-1">
            {% render 'social-list', spacing: 'mr-1' %}
          </div>
        {% endif %}
      </div>
      <div class="col-lg-6 d-none d-lg-block">
        <div class="rte text-right transparent-0.4">
          {{ section.settings.copyrights }}
        </div>
      </div>
    </div>

    <div class="mt-2">
      <div class="row">
        {% if section.settings.menu_primary != blank %}
          <div class="col-lg-6{% if section.settings.menu_primary_hide %} d-none d-lg-block{% endif %}">
            <ul class="list-unstyled rte d-flex flex-wrap mb-n1">
              {% for link in section.settings.menu_primary.links %}
                <li class="mb-1{% unless forloop.last %} mr-1{% endunless %}">
                  <a href="{{ link.url }}" class="link text-dark">{{ link.title }}</a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
        {% if section.settings.menu_secondary != blank %}
          <div class="col-lg-6{% if section.settings.menu_secondary_hide %} d-none d-lg-block{% endif %}">
            <ul class="list-unstyled rte d-flex flex-wrap justify-content-lg-end mb-n1">
              {% for link in section.settings.menu_secondary.links %}
                <li class="mb-1{% unless forloop.last %} mr-1{% endunless %}">
                  <a href="{{ link.url }}" class="link text-dark">{{ link.title }}</a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
  
  <div class="d-lg-none mt-1 rte transparent-0.4">
    {{ section.settings.copyrights }}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.footer.name",
  "tag": "footer",
  "class": "footer",
  "settings": [
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    },
    {
      "type": "richtext",
      "id": "copyrights",
      "label": "Copyrights"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Show social",
      "default": true
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu_primary",
      "label": "Primary menu"
    },
    {
      "type": "checkbox",
      "id": "menu_primary_hide",
      "label": "Hide on mobile"
    },
    {
      "type": "link_list",
      "id": "menu_secondary",
      "label": "Secondary menu"
    },
    {
      "type": "checkbox",
      "id": "menu_secondary_hide",
      "label": "Hide on mobile"
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Text",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "hide_on_mobile",
          "label": "Hide block on mobile"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "About us"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur consectetur sit amet leo a malesuada. Maecenas nec consectetur lectus.</p>"
        },
        {
          "type": "range",
          "id": "content_max_width",
          "min": 300,
          "step": 10,
          "max": 900,
          "unit": "px",
          "default": 450,
          "label": "Max width on desktop"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "settings": [
        {
          "type": "checkbox",
          "id": "hide_on_mobile",
          "label": "Hide block on mobile"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Keep In Touch"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Sign up to our newsletter lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>"
        },
        {
          "type": "range",
          "id": "content_max_width",
          "min": 300,
          "step": 10,
          "max": 900,
          "unit": "px",
          "default": 450,
          "label": "Max width on desktop"
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Placeholder",
          "default": "Enter your Email"
        }
      ]
    }
  ]
}
{% endschema %}
