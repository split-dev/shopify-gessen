<div class="container pt-1">
  <div class="row">
    <div class="col-12 col-lg-8">
      {% if section.settings.enable_page_title %}
        <h1>{{ page.title }}</h1>
      {% endif %}
      <div class="rte">
        {{ page.content }}
      </div>
    </div>
    <div class="col-12 col-lg-4 order-n1 order-lg-1">
      {%- assign image = page.metafields.additional.image -%}
      {%- assign ratio = image.aspect_ratio | default: 0.833333333 -%}
      {% if image != blank %}
        <div class="position-sticky" style="top: var(--header-height);">
          <div class="border position-relative overflow-hidden" style="padding-bottom: {{ 1 | divided_by: ratio | times: 100 }}%;">
            <img srcset="{%- if image.width >= 165 -%}{{ image | image_url: width: 165 }} 165w,{%- endif -%}
                  {%- if image.width >= 360 -%}{{ image | image_url: width: 360 }} 360w,{%- endif -%}
                  {%- if image.width >= 533 -%}{{ image | image_url: width: 533 }} 533w,{%- endif -%}
                  {%- if image.width >= 720 -%}{{ image | image_url: width: 720 }} 720w,{%- endif -%}
                  {%- if image.width >= 940 -%}{{ image | image_url: width: 940 }} 940w,{%- endif -%}
                  {%- if image.width >= 1066 -%}{{ image | image_url: width: 1066 }} 1066w,{%- endif -%}
                  {{ image | image_url }} {{ image.width }}w"
                  sizes="(min-width: 991px) calc((100vw - 2rem) / 3), calc(100vw - 2rem)"
                  src="{{ image | image_url: width: 533 }}"
                  class="absolute-fill w-100 h-100 fit-cover motion-reduce"
                  loading="lazy"
                  width="100"
                  height="100"
                  alt="{{ image.alt }}">
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main-page.name",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_page_title",
      "label": "Enable page title"
    }
  ]
}
{% endschema %}
